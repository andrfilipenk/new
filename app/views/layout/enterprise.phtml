<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= $this->getVar('title', 'Enterprise Project Management') ?></title>
    
    <!-- Enterprise UI Kit CSS -->
    <link rel="stylesheet" href="/public/html/kit-enterprise/assets/css/enterprise.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/public/css/app.css">
    <link rel="stylesheet" href="/public/css/project-views.css">
    
    <?= $this->getVar('extraCss', '') ?>
</head>
<body>
    <!-- Enterprise Layout Container -->
    <div class="enterprise-layout">
        
        <!-- Header -->
        <header class="enterprise-header">
            <div class="enterprise-header__left">
                <button class="enterprise-header__menu-toggle" id="sidebarToggle">
                    <span class="enterprise-icon">‚ò∞</span>
                </button>
                <h1 class="enterprise-header__title">Project Management</h1>
            </div>
            
            <div class="enterprise-header__center">
                <div class="enterprise-search">
                    <input type="text" class="enterprise-input" placeholder="Search projects, orders..." id="globalSearch">
                </div>
            </div>
            
            <div class="enterprise-header__right">
                <button class="enterprise-button enterprise-button--icon">
                    <span class="enterprise-icon">üîî</span>
                </button>
                <div class="enterprise-user-menu">
                    <button class="enterprise-user-menu__trigger">
                        <span class="enterprise-avatar">U</span>
                        <span class="enterprise-user-menu__name"><?= $this->session->get('username', 'User') ?></span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="enterprise-sidebar" id="enterpriseSidebar">
            <nav class="enterprise-nav">
                <ul class="enterprise-nav__list">
                    <li class="enterprise-nav__item">
                        <a href="/dashboard/kpi" class="enterprise-nav__link <?= $this->isActiveRoute('dashboard.kpi') ?>">
                            <span class="enterprise-icon">üìä</span>
                            <span class="enterprise-nav__text">Dashboard</span>
                        </a>
                    </li>
                    <li class="enterprise-nav__item">
                        <a href="/projects" class="enterprise-nav__link <?= $this->isActiveRoute('projects.index') ?>">
                            <span class="enterprise-icon">üìÅ</span>
                            <span class="enterprise-nav__text">Projects</span>
                        </a>
                    </li>
                    <li class="enterprise-nav__item">
                        <a href="#" class="enterprise-nav__link">
                            <span class="enterprise-icon">üë•</span>
                            <span class="enterprise-nav__text">Team</span>
                        </a>
                    </li>
                    <li class="enterprise-nav__item">
                        <a href="#" class="enterprise-nav__link">
                            <span class="enterprise-icon">‚öôÔ∏è</span>
                            <span class="enterprise-nav__text">Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="enterprise-content">
            <?php if ($flash = $this->session->getFlash('success')): ?>
                <div class="enterprise-alert enterprise-alert--success">
                    <?= htmlspecialchars($flash) ?>
                </div>
            <?php endif; ?>
            
            <?php if ($flash = $this->session->getFlash('error')): ?>
                <div class="enterprise-alert enterprise-alert--danger">
                    <?= htmlspecialchars($flash) ?>
                </div>
            <?php endif; ?>
            
            <?= $this->getContent() ?>
        </main>

    </div>

    <!-- Toast Notification Container -->
    <div class="enterprise-toast-container" id="toastContainer"></div>

    <!-- Enterprise UI Kit JS -->
    <script src="/public/html/kit-enterprise/assets/js/enterprise.js"></script>
    
    <!-- Custom JS -->
    <script src="/public/js/app.js"></script>
    <script src="/public/js/project-views.js"></script>
    
    <?= $this->getVar('extraJs', '') ?>
    
    <script>
        // Sidebar toggle
        document.getElementById('sidebarToggle')?.addEventListener('click', function() {
            document.getElementById('enterpriseSidebar')?.classList.toggle('enterprise-sidebar--collapsed');
        });
    </script>
</body>
</html>
