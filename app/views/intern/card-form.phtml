<?php
/** @var \Core\Utils\Url $url */
$url = $this->getDI()->get('url');
?>
<form class="row" 
      method="post" 
      action="<?=$url->get('add-task')?>" 
      id="simpleTaskForm"
      data-ajax-form
      data-form-title="Create Task"
      data-reset-on-success="true">
    <div class="col-6">
          <input type="text" name="title" class="enterprise-input" placeholder="This Task must be done by..." required>
    </div>
    <div class="col-2">
        <select class="enterprise-select" name="priority_id" required>
            <option value="">Priority</option>
            <?php foreach ($priorities as $prio): ?>
                <option value="<?=$prio->id?>"><?=$prio->title?></option>
            <?php endforeach; ?>
        </select>
    </div>
    <div class="col">
        <div class="input-group">
            <input type="date" class="enterprise-input" value="2025-10-16" name="begin_date" id="begin_date" required>
            <span class="input-group-text">-</span>
            <input type="date" class="enterprise-input" min="2025-10-16" name="end_date" id="end_date" required>
        </div>
    </div>
    <div class="col-1">
        <input type="submit" class="enterprise-button enterprise-button--primary" value="Save">
    </div>
</form>



<?php $this->startSection('html-footer'); ?>
    <script>
    document.getElementById('simpleTaskForm').addEventListener('ajax-form:success', (e) => {
        const { result, response } = e.detail;
        if (result === 'success') {
            const task = response.item;
            
            alert(response.message); // e.g., "Logged in successfully."
            //  window.location.href = '/board';
        } 
    });
    </script>
<?php $this->endSection(); ?>