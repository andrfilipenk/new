<?php
/** @var \Core\Utils\Url $url */
$url = $this->getDI()->get('url');
$navigation = [
    'Home' => 'house',
    'Calendar' => 'calendar3',
    'Tasks' => 'list-task',
    'Flow Builder' => 'diagram-3',
    'User Management' => 'people-fill',
    'Access Control' => 'ui-checks',
    'Settings' => 'gear-fill',
];
?>
<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= htmlspecialchars($title ?? 'Our Framework') ?></title>
    <link rel="stylesheet" href="<?= $url->get('css/bootstrap.min.css', [], true) ?>">
    <link rel="stylesheet" href="<?= $url->get('css/bootstrap-icons.min.css', [], true) ?>">
    <link rel="stylesheet" href="<?= $url->get('css/app.css', [], true) ?>">
</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-auto sticky-top">
            <div class="d-flex flex-sm-column flex-row flex-nowrap bg-dark align-items-center sticky-top">
                <a href="/" class="d-block p-3 link-light text-decoration-none" title="">
                    <i class="bi-bootstrap fs-1"></i>
                </a>
                <ul class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between w-100 px-3 align-items-center">
                    <?php foreach($navigation as $label => $icon): ?>
                        <li class="nav-item">
                            <a href="#" class="nav-link py-3 px-3" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="<?=$label?>">
                                <i class="bi bi-<?=$icon?> fs-1"></i>
                            </a>
                        </li>
                    <?php endforeach; ?>
                </ul>
                <div class="dropdown">
                    <a href="#" class="d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle" id="dropdownUser3" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle h2"></i>
                    </a>
                    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser3">
                        <?php if (isset($navigation['user'])): ?>
                            <?php foreach($navigation['user']['items'] as $item): ?>
                                <li><a class="dropdown-item" href="<?= $item['url'] ?: '#' ?>">
                                    <?php if (!empty($item['icon'])): ?>
                                        <i class="bi bi-<?= htmlspecialchars($item['icon']) ?> me-2"></i>
                                    <?php endif; ?>
                                    <?= htmlspecialchars($item['label']) ?>
                                </a></li>
                            <?php endforeach; ?>
                        <?php endif; ?>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-sm p-3 min-vh-100">
            <div class="content">
                <?php echo $this->yield('content'); ?>
            </div>
        </div>
    </div>
</div>

    <?php if (($messages = $this->messages()) && count($messages) > 0) : ?>
        <div aria-live="polite" aria-atomic="true" class="position-relative">
            <div class="toast-container top-0 end-0 p-3">
                <?php foreach ($messages as $msg) : ?>
                    <div class="toast text-bg-<?= $msg['type'] ?>" role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="d-flex">
                            <div class="toast-body"><?= $msg['message'] ?></div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                    </div>
                <?php endforeach; ?>
            </div>
        </div>
    <?php endif; ?>



   
    <script src="<?= $url->get('js/bootstrap.bundle.min.js') ?>"></script>
    <script src="<?= $url->get('js/app.js') ?>"></script>
</body>

</html>