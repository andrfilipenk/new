<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Calendar Library - Complete Documentation</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-icons.min.css" rel="stylesheet">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
    <style>
        /* Custom gradient header */
        .gradient-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        /* Sticky navigation */
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 1020;
        }
        
        /* Custom borders for sections */
        .section-border {
            border-left: 4px solid #667eea;
        }
        
        /* Feature cards styling */
        .feature-card {
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        
        /* Code blocks */
        pre[class*="language-"] {
            border-left: 4px solid #667eea;
            border-radius: 0.375rem;
        }
        
        /* Table styling */
        .table thead th {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        /* Custom text colors */
        .text-primary-custom {
            color: #667eea !important;
        }
        
        .text-secondary-custom {
            color: #764ba2 !important;
        }
        
        /* Navigation links */
        .nav-link-custom {
            background: #e9ecef;
            color: #667eea;
            transition: all 0.3s ease;
        }
        
        .nav-link-custom:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container-fluid px-4">
        <header class="gradient-header text-white rounded-3 shadow-sm my-4 p-5">
            <h1 class="display-4 mb-3">üìÖ SVG Calendar Library</h1>
            <p class="lead mb-2">Enterprise-Grade Calendar Visualization for PHP Applications</p>
            <p class="mb-0 opacity-75">Version 1.0.0 | PHP 8.1+</p>
        </header>

        <nav class="bg-white shadow-sm p-4 mb-4 sticky-nav">
            <div class="d-flex flex-wrap gap-2">
                <a href="#introduction" class="btn btn-sm nav-link-custom text-decoration-none px-3">Introduction</a>
                <a href="#installation" class="btn btn-sm nav-link-custom text-decoration-none px-3">Installation</a>
                <a href="#quick-start" class="btn btn-sm nav-link-custom text-decoration-none px-3">Quick Start</a>
                <a href="#views" class="btn btn-sm nav-link-custom text-decoration-none px-3">View Types</a>
                <a href="#themes" class="btn btn-sm nav-link-custom text-decoration-none px-3">Theming</a>
                <a href="#data-providers" class="btn btn-sm nav-link-custom text-decoration-none px-3">Data Providers</a>
                <a href="#interactivity" class="btn btn-sm nav-link-custom text-decoration-none px-3">Interactivity</a>
                <a href="#examples" class="btn btn-sm nav-link-custom text-decoration-none px-3">Examples</a>
                <a href="#api" class="btn btn-sm nav-link-custom text-decoration-none px-3">API Reference</a>
            </div>
        </nav>

        <!-- INTRODUCTION -->
        <section id="introduction" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">üìñ Introduction</h2>
            <p>The SVG Calendar Library is a high-performance, enterprise-grade calendar visualization tool that generates responsive, interactive calendars using SVG rendering. It's designed for modern PHP applications requiring robust date-based data visualization.</p>
            
            <h3 class="text-secondary-custom">Key Features</h3>
            <div class="row g-3 my-4">
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 feature-card">
                        <div class="card-body">
                            <h5 class="card-title text-primary-custom">üé® Multiple Views</h5>
                            <p class="card-text">Day, Week, Multi-Week, Month, Year, and Custom Period views</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 feature-card">
                        <div class="card-body">
                            <h5 class="card-title text-primary-custom">üñºÔ∏è SVG Rendering</h5>
                            <p class="card-text">Crystal-clear visuals at any screen resolution</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 feature-card">
                        <div class="card-body">
                            <h5 class="card-title text-primary-custom">‚ö° Interactive</h5>
                            <p class="card-text">Date selection, range selection, and clickable events</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 feature-card">
                        <div class="card-body">
                            <h5 class="card-title text-primary-custom">üé≠ Customizable</h5>
                            <p class="card-text">Pre-built themes or create your own</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="text-secondary-custom">Directory Structure</h3>
            <pre><code class="language-bash">app/Core/Calendar/
‚îú‚îÄ‚îÄ CalendarFactory.php              # Entry point
‚îú‚îÄ‚îÄ CalendarBuilder.php              # Fluent API builder
‚îú‚îÄ‚îÄ Calendar.php                     # Main calendar instance
‚îú‚îÄ‚îÄ CalendarConfig.php               # Configuration
‚îú‚îÄ‚îÄ CalendarServiceProvider.php      # DI registration
‚îú‚îÄ‚îÄ Renderers/                       # View rendering
‚îÇ   ‚îú‚îÄ‚îÄ MonthViewRenderer.php
‚îÇ   ‚îú‚îÄ‚îÄ WeekViewRenderer.php
‚îÇ   ‚îú‚îÄ‚îÄ YearViewRenderer.php
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ DataProviders/                   # Data sources
‚îÇ   ‚îú‚îÄ‚îÄ ArrayDataProvider.php
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseDataProvider.php
‚îÇ   ‚îî‚îÄ‚îÄ CallbackDataProvider.php
‚îú‚îÄ‚îÄ Models/                          # Data models
‚îÇ   ‚îú‚îÄ‚îÄ Bar.php
‚îÇ   ‚îú‚îÄ‚îÄ DateRange.php
‚îÇ   ‚îî‚îÄ‚îÄ CalendarData.php
‚îú‚îÄ‚îÄ Styling/                         # Themes
‚îÇ   ‚îî‚îÄ‚îÄ Themes/
‚îÇ       ‚îú‚îÄ‚îÄ DefaultTheme.php
‚îÇ       ‚îú‚îÄ‚îÄ DarkTheme.php
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ Events/                          # Event handling</code></pre>
        </section>

        <!-- INSTALLATION -->
        <section id="installation" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">‚öôÔ∏è Installation</h2>
            
            <h3 class="text-secondary-custom">Step 1: Register the Service Provider</h3>
            <p>Add the <code>CalendarServiceProvider</code> to your <code>bootstrap.php</code> file:</p>
            
            <pre><code class="language-php">use Core\Calendar\CalendarServiceProvider;

$providers = [
    // ... other providers
    CalendarServiceProvider::class,
];</code></pre>

            <h3 class="text-secondary-custom mt-4">Step 2: Use the Factory</h3>
            <p>The library is now ready to use! Access it through the <code>CalendarFactory</code>:</p>
            
            <pre><code class="language-php">use Core\Calendar\CalendarFactory;

// Create a calendar
$calendar = CalendarFactory::month()->build();
echo $calendar->render();</code></pre>
            
            <div class="alert alert-success">
                <i class="bi bi-check-circle-fill me-2"></i>
                <strong>That's it!</strong> No additional configuration required. The library works out of the box with sensible defaults.
            </div>
        </section>

        <!-- QUICK START -->
        <section id="quick-start" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">üöÄ Quick Start</h2>
            
            <h3 class="text-secondary-custom">Basic Month Calendar</h3>
            <pre><code class="language-php">use Core\Calendar\CalendarFactory;

$calendar = CalendarFactory::month()->build();
echo $calendar->render(); // Outputs SVG</code></pre>

            <h3 class="text-secondary-custom">Calendar with Events/Tasks</h3>
            <pre><code class="language-php">use Core\Calendar\CalendarFactory;
use Core\Calendar\Models\Bar;
use DateTimeImmutable;

// Create event bars
$events = [
    new Bar(
        id: 'meeting1',
        title: 'Team Meeting',
        startDate: new DateTimeImmutable('2025-10-15 09:00'),
        endDate: new DateTimeImmutable('2025-10-15 10:30'),
        backgroundColor: '#4CAF50'
    ),
    new Bar(
        id: 'sprint1',
        title: 'Development Sprint',
        startDate: new DateTimeImmutable('2025-10-16'),
        endDate: new DateTimeImmutable('2025-10-20'),
        backgroundColor: '#2196F3'
    ),
];

// Build calendar with events
$calendar = CalendarFactory::month()
    ->addBars($events)
    ->enableWeekNumbers()
    ->build();

echo $calendar->toHtml(); // Outputs SVG + JavaScript</code></pre>

            <h3 class="text-secondary-custom">Interactive Calendar</h3>
            <pre><code class="language-php">$calendar = CalendarFactory::month()
    ->enableSelection()
    ->onDateClick('handleDateSelection')
    ->bindToFormFields(['date' => 'selected_date'])
    ->build();

echo $calendar->toHtml();</code></pre>

            <p class="mt-3">Add corresponding JavaScript handler:</p>
            
            <pre><code class="language-javascript">function handleDateSelection(date, element) {
    console.log('Selected date:', date);
    alert('You selected: ' + date);
}</code></pre>
        </section>

        <!-- VIEW TYPES -->
        <section id="views" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">üìä View Types</h2>
            
            <h3 class="text-secondary-custom">Month View <span class="badge bg-primary">DEFAULT</span></h3>
            <p>Display a full month calendar with optional week numbers:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::month()
    ->setDate(new DateTimeImmutable('2025-10-15'))
    ->enableWeekNumbers()
    ->build();</code></pre>
            
            <h3 class="text-secondary-custom mt-4">Week View</h3>
            <p>Show a single week with customizable start day:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::week()
    ->setDate(new DateTimeImmutable('2025-10-15'))
    ->setFirstDayOfWeek(1) // Monday
    ->build();</code></pre>
            
            <h3 class="text-secondary-custom mt-4">Multi-Week View</h3>
            <p>Display multiple consecutive weeks:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::multiWeek(
    new DateTimeImmutable('2025-10-01'),
    4 // Number of weeks
)->build();</code></pre>
            
            <h3 class="text-secondary-custom mt-4">Year View</h3>
            <p>Show an entire year at a glance:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::year(2025)->build();</code></pre>
            
            <h3 class="text-secondary-custom mt-4">Day View</h3>
            <p>Focus on a single day:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::create('single-day')
    ->setView('day')
    ->setDate(new DateTimeImmutable('2025-10-15'))
    ->build();</code></pre>
            
            <h3 class="text-secondary-custom mt-4">Custom Period View</h3>
            <p>Define your own date range:</p>
            <pre><code class="language-php">$calendar = CalendarFactory::custom(
    new DateTimeImmutable('2025-10-01'),
    new DateTimeImmutable('2025-10-31')
)->build();</code></pre>
        </section>

            <h3>Field Examples</h3>
            
            <h4 class="text-secondary-custom mt-4">Text Field with Validation</h4>
            <pre><code class="language-php">$username = FieldFactory::text('username', [
    'label' => 'Username',
    'required' => true,
    'placeholder' => 'johndoe',
    'helpText' => 'Letters and numbers only, 3-20 characters',
    'minlength' => 3,
    'maxlength' => 20,
    'pattern' => '[a-zA-Z0-9]+'
]);</code></pre>

            <h4 class="text-secondary-custom">Email Field</h4>
            <pre><code class="language-php">$email = FieldFactory::email('email', [
    'label' => 'Email Address',
    'required' => true,
    'placeholder' => 'you@example.com',
    'helpText' => 'We\'ll never share your email'
]);</code></pre>

            <h4 class="text-secondary-custom">Number Field with Range</h4>
            <pre><code class="language-php">$age = FieldFactory::number('age', [
    'label' => 'Age',
    'required' => true,
    'min' => 18,
    'max' => 120,
    'helpText' => 'Must be 18 or older'
]);</code></pre>

            <h4 class="text-secondary-custom">Select Field</h4>
            <pre><code class="language-php">$country = FieldFactory::select('country', [
    'US' => 'United States',
    'UK' => 'United Kingdom',
    'CA' => 'Canada',
    'AU' => 'Australia'
], [
    'label' => 'Country',
    'required' => true,
    'emptyOption' => '-- Select Country --'
]);</code></pre>

            <h4 class="text-secondary-custom">Textarea Field</h4>
            <pre><code class="language-php">$bio = FieldFactory::textarea('bio', [
    'label' => 'Biography',
    'placeholder' => 'Tell us about yourself...',
    'rows' => 5,
    'maxlength' => 500,
    'helpText' => 'Maximum 500 characters'
]);</code></pre>
        </section>

        <!-- FORM BUILDER -->
        <section id="form-builder">
            <h2>üèóÔ∏è Form Builder</h2>
            
            <p>The FormBuilder provides a fluent interface for constructing forms declaratively.</p>

            <h3>Creating a Form</h3>
            <pre><code class="language-php">use Core\Forms\FormBuilder;

$form = FormBuilder::create('contact_form', [
        'action' => '/contact/submit',
        'method' => 'POST',
        'class' => 'contact-form'
    ])
    ->text('name', [
        'label' => 'Your Name',
        'required' => true
    ])
    ->email('email', [
        'label' => 'Email',
        'required' => true
    ])
    ->textarea('message', [
        'label' => 'Message',
        'required' => true,
        'rows' => 5
    ])
    ->csrf()
    ->build();</code></pre>

            <h3>Quick Form Templates</h3>
            
            <h4>Login Form</h4>
            <pre><code class="language-php">$loginForm = FormBuilder::login('login', '/auth/login');

// Generates:
// - Email field
// - Password field  
// - CSRF protection</code></pre>

            <h4>Registration Form</h4>
            <pre><code class="language-php">$registerForm = FormBuilder::registration('register', '/auth/register');

// Generates:
// - Username field (3-20 chars, alphanumeric)
// - Email field
// - Password field (min 8 chars)
// - Password confirmation field
// - CSRF protection
// - Password match validation</code></pre>

            <h4>Contact Form</h4>
            <pre><code class="language-php">$contactForm = FormBuilder::contact('contact', '/contact/send');

// Generates:
// - Name field
// - Email field
// - Subject field
// - Message textarea
// - CSRF protection</code></pre>

            <h3>Builder Methods</h3>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Description</th>
                        <th>Returns</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>create($name, $config)</code></td>
                        <td>Create new form builder</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>setAction($url)</code></td>
                        <td>Set form action URL</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>setMethod($method)</code></td>
                        <td>Set HTTP method</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>text($name, $config)</code></td>
                        <td>Add text field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>email($name, $config)</code></td>
                        <td>Add email field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>password($name, $config)</code></td>
                        <td>Add password field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>number($name, $config)</code></td>
                        <td>Add number field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>select($name, $options, $config)</code></td>
                        <td>Add select field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>textarea($name, $config)</code></td>
                        <td>Add textarea field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>hidden($name, $value)</code></td>
                        <td>Add hidden field</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>csrf($enabled)</code></td>
                        <td>Enable CSRF protection</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>setAttribute($name, $value)</code></td>
                        <td>Set form attribute</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>addClass($class)</code></td>
                        <td>Add CSS class</td>
                        <td>FormBuilder</td>
                    </tr>
                    <tr>
                        <td><code>build()</code></td>
                        <td>Build form definition</td>
                        <td>FormDefinition</td>
                    </tr>
                    <tr>
                        <td><code>buildManager()</code></td>
                        <td>Build form manager</td>
                        <td>FormManager</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- VALIDATION -->
        <section id="validation" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">‚úÖ Validation</h2>
            
            <p>The validation system provides comprehensive field-level and form-level validation with detailed error messages.</p>

            <h3 class="text-secondary-custom">Field-Level Validation</h3>
            <pre><code class="language-php">use Core\Forms\Fields\FieldFactory;

$email = FieldFactory::email('email', [
    'label' => 'Email',
    'required' => true,
    'validationRules' => [
        'email' => true,
        'maxlength' => 100
    ]
]);

// Validate a value
$result = $email->validate('test@example.com');

if ($result->isFailed()) {
    $errors = $result->getErrors();
}</code></pre>

            <h3>Available Validation Rules</h3>
             <table class="table">
                <thead>
                    <tr>
                        <th>Rule</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>required</code></td>
                        <td>Field must have a value</td>
                        <td><code>'required' => true</code></td>
                    </tr>
                    <tr>
                        <td><code>email</code></td>
                        <td>Valid email format</td>
                        <td><code>'email' => true</code></td>
                    </tr>
                    <tr>
                        <td><code>url</code></td>
                        <td>Valid URL format</td>
                        <td><code>'url' => true</code></td>
                    </tr>
                    <tr>
                        <td><code>numeric</code></td>
                        <td>Numeric value only</td>
                        <td><code>'numeric' => true</code></td>
                    </tr>
                    <tr>
                        <td><code>minlength</code></td>
                        <td>Minimum character length</td>
                        <td><code>'minlength' => 5</code></td>
                    </tr>
                    <tr>
                        <td><code>maxlength</code></td>
                        <td>Maximum character length</td>
                        <td><code>'maxlength' => 100</code></td>
                    </tr>
                    <tr>
                        <td><code>min</code></td>
                        <td>Minimum numeric value</td>
                        <td><code>'min' => 0</code></td>
                    </tr>
                    <tr>
                        <td><code>max</code></td>
                        <td>Maximum numeric value</td>
                        <td><code>'max' => 100</code></td>
                    </tr>
                    <tr>
                        <td><code>pattern</code></td>
                        <td>Regex pattern match</td>
                        <td><code>'pattern' => '[A-Za-z]+'</code></td>
                    </tr>
                </tbody>
            </table>

            <h3 class="text-secondary-custom">Form-Level Validation with FormManager</h3>
            <pre><code class="language-php">use Core\Forms\FormBuilder;
use Core\Forms\FormManager;

$form = FormBuilder::create('user_form')
    ->text('username', ['required' => true])
    ->email('email', ['required' => true])
    ->build();

$manager = new FormManager($form);
$manager->handleRequest($_POST);

if ($manager->isSubmitted()) {
    if ($manager->isValid()) {
        // Form is valid
        $data = $manager->getValidatedData();
    } else {
        // Show errors
        $errors = $manager->getErrors();
        
        // Get field-specific errors
        $emailErrors = $manager->getFieldErrors('email');
        
        // Get first error for a field
        $firstError = $manager->getFirstFieldError('email');
    }
}</code></pre>

            <h3>Custom Validation</h3>
            <pre><code class="language-php">$field = FieldFactory::text('username', [
    'label' => 'Username',
    'required' => true
]);

// Add custom validation logic
$result = $field->validate($value);

if ($result->isValid()) {
    // Additional custom checks
    if (usernameExists($value)) {
        $result->addError('username', 'Username already taken');
    }
}</code></pre>

            <h3 class="text-secondary-custom">Validation Result</h3>
            <pre><code class="language-php">$result = $field->validate($value);

// Check if valid
$isValid = $result->isValid();
$isFailed = $result->isFailed();

// Get all errors
$errors = $result->getErrors();
// Returns: ['fieldName' => ['Error 1', 'Error 2']]

// Get errors for specific field
$fieldErrors = $result->getFieldErrors('email');

// Get first error
$firstError = $result->getFirstFieldError('email');</code></pre>

            <h3 class="text-secondary-custom">ValidationPipeline System</h3>
            <p>The ValidationPipeline orchestrates comprehensive validation by coordinating field validators, form validators, and error aggregation in a structured, two-phase process.</p>
            
            <div class="alert alert-info border-start border-info border-3">
                <strong><i class="bi bi-info-circle me-2"></i>Pipeline Architecture:</strong>
                The validation system uses a pipeline pattern that processes validation in phases:
                <ol class="mt-2 mb-0">
                    <li><strong>Phase 1:</strong> Individual field validation</li>
                    <li><strong>Phase 2:</strong> Form-level cross-field validation</li>
                    <li><strong>Phase 3:</strong> Error aggregation and result compilation</li>
                </ol>
            </div>

            <h4 class="text-secondary-custom">Using ValidationPipeline Directly</h4>
            <pre><code class="language-php">use Core\Forms\Validation\ValidationPipeline;
use Core\Forms\FormDefinition;

// Create custom validation pipeline
$pipeline = new ValidationPipeline();

// Configure pipeline behavior
$pipeline->setStopOnFirstError(false); // Continue validation on errors

// Validate form
$result = $pipeline->validate($formDefinition, $data);

if ($result->isValid()) {
    // All validation passed
    echo "Form is valid!";
} else {
    // Handle validation errors
    $errors = $result->getErrors();
    foreach ($errors as $field => $fieldErrors) {
        echo "Field '{$field}': " . implode(', ', $fieldErrors) . "\n";
    }
}

// Quick validation helper
$isValid = ValidationPipeline::isValid($formDefinition, $data);

// Get validation result with errors
$validationInfo = ValidationPipeline::validateWithErrors($formDefinition, $data);
// Returns: ['isValid' => bool, 'errors' => array, 'hasErrors' => bool]</code></pre>

            <h4 class="text-secondary-custom">Custom Field Validators</h4>
            <p>Register custom validation rules for specific field requirements:</p>
            <pre><code class="language-php">use Core\Forms\Validation\FieldValidator;

// Register custom validator
FieldValidator::registerValidator('username_available', function($value, $config, $context) {
    // Check if username is available in database
    return !usernameExists($value);
});

// Use in field configuration
$field = FieldFactory::text('username', [
    'label' => 'Username',
    'required' => true,
    'validationRules' => [
        'username_available' => [
            'message' => 'This username is already taken'
        ]
    ]
]);

// Custom message for existing rules
FieldValidator::setMessage('email', 'Please provide a valid email address');</code></pre>

            <h4 class="text-secondary-custom">Form-Level Validation</h4>
            <p>The FormValidator handles cross-field validation rules that require multiple field values:</p>
            <pre><code class="language-php">use Core\Forms\FormBuilder;
use Core\Forms\Validation\FormValidator;

// Register custom form-level validator
FormValidator::registerValidator('password_strength', function($data, $config, $form) {
    $password = $data['password'] ?? '';
    $username = $data['username'] ?? '';
    
    // Check password doesn't contain username
    if (stripos($password, $username) !== false) {
        return ValidationResult::failure([
            'password' => ['Password cannot contain your username']
        ]);
    }
    
    return ValidationResult::success();
});

// Built-in form validators in FormBuilder
$form = FormBuilder::create('registration')
    ->text('username', ['required' => true])
    ->password('password', ['required' => true])
    ->password('password_confirm', ['required' => true])
    
    // Fields must match validation
    ->addValidationRule('fieldsMatch', [
        'fields' => ['password', 'password_confirm'],
        'message' => 'Passwords must match'
    ])
    
    // Conditional requirement
    ->addValidationRule('conditionalRequired', [
        'if_field' => 'country',
        'equals' => 'US',
        'then_required' => ['state', 'zip_code'],
        'message' => 'State and ZIP code are required for US addresses'
    ])
    
    // At least one field required
    ->addValidationRule('requireOneOf', [
        'fields' => ['phone', 'email'],
        'message' => 'Please provide either phone or email'
    ])
    
    ->csrf()
    ->build();</code></pre>

            <h4 class="text-secondary-custom">Available Form-Level Validators</h4>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Validator</th>
                            <th>Description</th>
                            <th>Configuration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="text-danger">fieldsMatch</code></td>
                            <td>Validate that multiple fields have matching values</td>
                            <td><code class="text-info">['fields' => ['password', 'confirm'], 'message' => '...']</code></td>
                        </tr>
                        <tr>
                            <td><code class="text-danger">requireOneOf</code></td>
                            <td>Require at least one field from a group</td>
                            <td><code class="text-info">['fields' => ['phone', 'email'], 'message' => '...']</code></td>
                        </tr>
                        <tr>
                            <td><code class="text-danger">conditionalRequired</code></td>
                            <td>Require fields based on another field's value</td>
                            <td><code class="text-info">['if_field' => 'country', 'equals' => 'US', 'then_required' => ['state']]</code></td>
                        </tr>
                        <tr>
                            <td><code class="text-danger">uniqueCombination</code></td>
                            <td>Validate unique combination using callback</td>
                            <td><code class="text-info">['fields' => ['first', 'last'], 'callback' => function($values) {...}]</code></td>
                        </tr>
                        <tr>
                            <td><code class="text-danger">sum</code></td>
                            <td>Validate total sum of numeric fields</td>
                            <td><code class="text-info">['fields' => ['a', 'b', 'c'], 'equals' => 100]</code></td>
                        </tr>
                        <tr>
                            <td><code class="text-danger">dateRange</code></td>
                            <td>Validate date range constraints</td>
                            <td><code class="text-info">['start_field' => 'start', 'end_field' => 'end', 'max_days' => 30]</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4 class="text-secondary-custom">ValidationPipeline Configuration</h4>
            <pre><code class="language-php">// Create pipeline with custom components
$customFieldValidator = new CustomFieldValidator();
$customFormValidator = new CustomFormValidator();

$pipeline = new ValidationPipeline($customFieldValidator, $customFormValidator);

// Configure behavior
$pipeline->setStopOnFirstError(true);  // Stop validation on first error

// Use with FormManager
$manager = new FormManager($form, $pipeline);

// Access pipeline components
$fieldValidator = $pipeline->getFieldValidator();
$formValidator = $pipeline->getFormValidator();
$errorAggregator = $pipeline->getErrorAggregator();

// Validate single field with context
$fieldResult = $pipeline->validateField($field, $value, $allFormData);</code></pre>
        </section>

        <!-- SECURITY -->
        <section id="security" class="bg-white rounded-3 shadow-sm p-4 mb-4 section-border">
            <h2 class="text-primary-custom border-bottom border-primary pb-2 mb-4">üõ°Ô∏è Security</h2>
            
            <p>The form system includes robust security features to protect against common web vulnerabilities.</p>

            <h3 class="text-secondary-custom">CSRF Protection</h3>
            <div class="alert alert-info border-start border-info border-3">
                <strong><i class="bi bi-info-circle me-2"></i>Note:</strong> CSRF protection is automatically enabled when you use the <code>csrf()</code> method in FormBuilder.
            </div>

            <pre><code class="language-php">// Enable CSRF protection
$form = FormBuilder::create('contact')
    ->text('name', ['required' => true])
    ->email('email', ['required' => true])
    ->csrf()  // Adds CSRF token field
    ->build();

// FormManager automatically validates the token
$manager = new FormManager($form);
$manager->handleRequest($_POST);

if ($manager->isValid()) {
    // CSRF token was validated successfully
    $data = $manager->getValidatedData();
}</code></pre>

            <h3>Manual CSRF Token Generation</h3>
            <pre><code class="language-php">use Core\Forms\Security\SecurityManager;

$securityManager = new SecurityManager();

// Generate token
$token = $securityManager->generateCsrfToken('my_form');

// Get CSRF field HTML
$csrfField = $securityManager->getCsrfField('my_form');
echo $csrfField;
// Outputs: &lt;input type="hidden" name="_csrf_token" value="..."&gt;

// Validate token
$isValid = $securityManager->validateCsrfToken($_POST, 'my_form');</code></pre>

            <h3>Input Sanitization</h3>
            <p>All form submissions are automatically sanitized to prevent XSS attacks.</p>

            <pre><code class="language-php">use Core\Forms\Security\InputSanitizer;

$sanitizer = new InputSanitizer();

// Sanitize form data
$cleanData = $sanitizer->sanitizeFormData($_POST, [
    'name' => 'text',
    'email' => 'email',
    'age' => 'number',
    'bio' => 'text'
]);</code></pre>

            <h3>Available Sanitization Filters</h3>
             <table class="table">
                <thead>
                    <tr>
                        <th>Filter</th>
                        <th>Description</th>
                        <th>Use For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>text</code></td>
                        <td>Strip HTML tags, encode entities</td>
                        <td>Text inputs</td>
                    </tr>
                    <tr>
                        <td><code>email</code></td>
                        <td>Validate and sanitize email</td>
                        <td>Email fields</td>
                    </tr>
                    <tr>
                        <td><code>number</code></td>
                        <td>Keep numeric characters only</td>
                        <td>Number fields</td>
                    </tr>
                    <tr>
                        <td><code>url</code></td>
                        <td>Validate and sanitize URL</td>
                        <td>URL fields</td>
                    </tr>
                    <tr>
                        <td><code>html</code></td>
                        <td>Allow safe HTML tags</td>
                        <td>Rich text editors</td>
                    </tr>
                </tbody>
            </table>

            <h3>Security Configuration</h3>
            <pre><code class="language-php">$form = FormBuilder::create('secure_form', [
    'action' => '/submit',
    'method' => 'POST'
])
->security([
    'csrf_enabled' => true,
    'sanitize_input' => true,
    'csrf_token_lifetime' => 7200, // 2 hours
    'csrf_rotate_token' => true
])
->text('data', ['required' => true])
->build();</code></pre>

            <div class="alert alert-warning border-start border-warning border-3">
                <strong><i class="bi bi-exclamation-triangle me-2"></i>Security Best Practices:</strong>
                <ul class="mb-0 mt-2">
                    <li>Always enable CSRF protection for forms that modify data</li>
                    <li>Use HTTPS in production</li>
                    <li>Validate data on both client and server side</li>
                    <li>Never trust user input - always sanitize</li>
                    <li>Use prepared statements for database queries</li>
                </ul>
            </div>
        </section>

        <!-- ADVANCED USAGE -->
        <section id="advanced">
            <h2>üéØ Advanced Usage</h2>
            
            <h3>Field Collections</h3>
            <pre><code class="language-php">use Core\Forms\Fields\FieldCollection;
use Core\Forms\Fields\FieldFactory;

$collection = new FieldCollection();

// Add multiple fields
$collection->add(FieldFactory::text('first_name'));
$collection->add(FieldFactory::text('last_name'));
$collection->add(FieldFactory::email('email'));

// Set values for all fields
$collection->setValues([
    'first_name' => 'John',
    'last_name' => 'Doe',
    'email' => 'john@example.com'
]);

// Get all values
$values = $collection->getValues();

// Get specific field
$emailField = $collection->get('email');

// Check if field exists
if ($collection->has('email')) {
    // ...
}

// Iterate over fields
foreach ($collection as $field) {
    echo $field->render();
}</code></pre>

            <h3>Dynamic Field Values</h3>
            <pre><code class="language-php">// Populate form with existing data (e.g., editing)
$form = FormBuilder::create('edit_user')
    ->text('username', ['label' => 'Username'])
    ->email('email', ['label' => 'Email'])
    ->build();

$manager = new FormManager($form);

// Bind data from database
$user = getUserFromDatabase($userId);
$manager->bind([
    'username' => $user['username'],
    'email' => $user['email']
]);

echo $manager->render();</code></pre>

            <h3>Conditional Fields</h3>
            <pre><code class="language-php">// Show/hide fields based on other field values
$form = FormBuilder::create('conditional_form')
    ->select('account_type', [
        'personal' => 'Personal',
        'business' => 'Business'
    ], ['label' => 'Account Type'])
    ->text('company_name', [
        'label' => 'Company Name',
        'attributes' => [
            'data-show-if' => 'account_type=business'
        ]
    ])
    ->build();</code></pre>

            <h3>Custom Field Rendering</h3>
            <pre><code class="language-php">// Render individual fields with custom options
$field = FieldFactory::text('custom');

echo $field->render([
    'show_labels' => true,
    'show_errors' => true,
    'show_help_text' => true,
    'errors' => ['custom' => ['This field has an error']]
]);</code></pre>

            <h3>Form in a Controller</h3>
            <pre><code class="language-php">&lt;?php
namespace User\Controller;

use Core\Mvc\Controller;
use Core\Forms\FormBuilder;
use Core\Forms\FormManager;

class RegisterController extends Controller
{
    public function showForm()
    {
        $form = FormBuilder::registration();
        $manager = new FormManager($form);
        
        $this->view->render('user/register', [
            'form' => $manager
        ]);
    }
    
    public function handleSubmit()
    {
        $form = FormBuilder::registration();
        $manager = new FormManager($form);
        
        $manager->handleRequest($this->request->getPost());
        
        if ($manager->isSubmitted() && $manager->isValid()) {
            $data = $manager->getValidatedData();
            
            // Save user
            // ...
            
            return $this->redirect('/login');
        }
        
        // Show form with errors
        $this->view->render('user/register', [
            'form' => $manager
        ]);
    }
}</code></pre>

            <h3>Rendering in Views</h3>
            <pre><code class="language-php">&lt;!-- In your view template --&gt;
&lt;h1&gt;Registration&lt;/h1&gt;

&lt;?php echo $form->render(); ?&gt;

&lt;!-- Or render with custom options --&gt;
&lt;?php echo $form->render([
    'submit_text' => 'Create Account',
    'submit_class' => 'btn btn-primary btn-lg'
]); ?&gt;</code></pre>
        </section>

        <!-- BEST PRACTICES -->
        <section id="best-practices">
            <h2>üéØ Best Practices</h2>
            
            <h3>1. Form Organization</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Create dedicated form classes for reusable forms
            </div>
            <pre><code class="language-php">&lt;?php
namespace User\Form;

use Core\Forms\FormBuilder;

class UserForm
{
    public static function build($id = null)
    {
        $form = FormBuilder::create('user_form', [
            'action' => '/user/save',
            'method' => 'POST'
        ])
        ->text('name', [
            'label' => 'Username',
            'required' => true
        ])
        ->email('email', [
            'label' => 'Email',
            'required' => true
        ])
        ->csrf();
        
        if ($id) {
            $form->hidden('user_id', $id);
        }
        
        return $form->build();
    }
}</code></pre>

            <h3>2. Validation Strategy</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Validate on both client and server side
            </div>
            <pre><code class="language-php">// Server-side validation
$manager->handleRequest($_POST);

if ($manager->isValid()) {
    // Additional business logic validation
    $data = $manager->getValidatedData();
    
    if (usernameExists($data['username'])) {
        // Add custom error
        $errors = ['username' => ['Username already exists']];
    }
}</code></pre>

            <h3>3. Security First</h3>
            <div class="alert alert-danger">
                <strong>‚ùå DON'T:</strong> Disable CSRF protection for POST forms
            </div>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Always enable CSRF for state-changing operations
            </div>
            <pre><code class="language-php">// Good - CSRF enabled
$form = FormBuilder::create('update_profile')
    ->text('name')
    ->csrf()  // ‚úÖ
    ->build();

// Bad - No CSRF protection for POST form
$form = FormBuilder::create('update_profile')
    ->text('name')
    // Missing csrf() - ‚ùå
    ->build();</code></pre>

            <h3>4. Error Handling</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Provide clear, user-friendly error messages
            </div>
            <pre><code class="language-php">if (!$manager->isValid()) {
    $errors = $manager->getErrors();
    
    // Display errors in the view
    foreach ($errors as $field => $fieldErrors) {
        foreach ($fieldErrors as $error) {
            echo "&lt;div class='error'&gt;{$error}&lt;/div&gt;";
        }
    }
}</code></pre>

            <h3>5. Field Configuration</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Use appropriate field types and constraints
            </div>
            <pre><code class="language-php">// Good - Appropriate constraints
$password = FieldFactory::password('password', [
    'label' => 'Password',
    'required' => true,
    'minlength' => 8,
    'helpText' => 'At least 8 characters'
]);

// Bad - No constraints on sensitive field
$password = FieldFactory::password('password');</code></pre>

            <h3>6. Form Lifecycle</h3>
            <div class="alert alert-info">
                <strong>Recommended Flow:</strong>
            </div>
            <ol>
                <li><strong>Create Form:</strong> Define form structure with FormBuilder</li>
                <li><strong>Display Form:</strong> Render form in view</li>
                <li><strong>Handle Submission:</strong> Process with FormManager</li>
                <li><strong>Validate:</strong> Check <code>isSubmitted()</code> and <code>isValid()</code></li>
                <li><strong>Process Data:</strong> Use <code>getValidatedData()</code></li>
                <li><strong>Handle Errors:</strong> Display errors if validation fails</li>
                <li><strong>Redirect:</strong> Redirect on success (PRG pattern)</li>
            </ol>

            <pre><code class="language-php">// Complete lifecycle example
public function handleForm()
{
    // 1. Create form
    $form = FormBuilder::registration();
    $manager = new FormManager($form);
    
    // 2. Handle request
    $manager->handleRequest($_POST);
    
    // 3. Check submission
    if ($manager->isSubmitted()) {
        // 4. Validate
        if ($manager->isValid()) {
            // 5. Process data
            $data = $manager->getValidatedData();
            $this->saveUser($data);
            
            // 6. Redirect (POST-Redirect-GET)
            return $this->redirect('/success');
        }
    }
    
    // 7. Display form (with errors if any)
    $this->view->render('form', ['form' => $manager]);
}</code></pre>

            <h3>7. Performance Optimization</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Reuse form definitions
            </div>
            <pre><code class="language-php">// Create once, use multiple times
class FormFactory
{
    private static $forms = [];
    
    public static function getLoginForm()
    {
        if (!isset(self::$forms['login'])) {
            self::$forms['login'] = FormBuilder::login();
        }
        return self::$forms['login'];
    }
}</code></pre>

            <h3>8. Accessibility</h3>
            <div class="alert alert-success">
                <strong>‚úÖ DO:</strong> Use labels and help text for screen readers
            </div>
            <pre><code class="language-php">// Good - Accessible form
$field = FieldFactory::text('username', [
    'label' => 'Username',  // ‚úÖ Label for screen readers
    'required' => true,
    'helpText' => 'Choose a unique username'  // ‚úÖ Help text
]);

// Bad - No label
$field = FieldFactory::text('username');  // ‚ùå No label</code></pre>
        </section>

        <!-- API REFERENCE -->
        <section id="api-reference">
            <h2>üìñ API Reference</h2>
            
            <h3>FieldFactory</h3>
            <p>Factory class for creating form fields.</p>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Parameters</th>
                        <th>Returns</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>create()</code></td>
                        <td>string $name, string $type, array $config</td>
                        <td>FieldInterface</td>
                        <td>Create field of any type</td>
                    </tr>
                    <tr>
                        <td><code>text()</code></td>
                        <td>string $name, array $config</td>
                        <td>InputField</td>
                        <td>Create text input field</td>
                    </tr>
                    <tr>
                        <td><code>email()</code></td>
                        <td>string $name, array $config</td>
                        <td>InputField</td>
                        <td>Create email input field</td>
                    </tr>
                    <tr>
                        <td><code>password()</code></td>
                        <td>string $name, array $config</td>
                        <td>InputField</td>
                        <td>Create password input field</td>
                    </tr>
                    <tr>
                        <td><code>number()</code></td>
                        <td>string $name, array $config</td>
                        <td>InputField</td>
                        <td>Create number input field</td>
                    </tr>
                    <tr>
                        <td><code>select()</code></td>
                        <td>string $name, array $options, array $config</td>
                        <td>SelectField</td>
                        <td>Create select dropdown field</td>
                    </tr>
                    <tr>
                        <td><code>textarea()</code></td>
                        <td>string $name, array $config</td>
                        <td>TextAreaField</td>
                        <td>Create textarea field</td>
                    </tr>
                    <tr>
                        <td><code>hidden()</code></td>
                        <td>string $name, mixed $value</td>
                        <td>InputField</td>
                        <td>Create hidden input field</td>
                    </tr>
                </tbody>
            </table>

            <h3>FormBuilder</h3>
            <p>Fluent interface for building forms.</p>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Parameters</th>
                        <th>Returns</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>create()</code></td>
                        <td>string $name, array $config</td>
                        <td>FormBuilder</td>
                        <td>Create new form builder</td>
                    </tr>
                    <tr>
                        <td><code>setAction()</code></td>
                        <td>string $action</td>
                        <td>FormBuilder</td>
                        <td>Set form action URL</td>
                    </tr>
                    <tr>
                        <td><code>setMethod()</code></td>
                        <td>string $method</td>
                        <td>FormBuilder</td>
                        <td>Set HTTP method</td>
                    </tr>
                    <tr>
                        <td><code>text()</code></td>
                        <td>string $name, array $config</td>
                        <td>FormBuilder</td>
                        <td>Add text field</td>
                    </tr>
                    <tr>
                        <td><code>csrf()</code></td>
                        <td>bool $enabled</td>
                        <td>FormBuilder</td>
                        <td>Enable CSRF protection</td>
                    </tr>
                    <tr>
                        <td><code>build()</code></td>
                        <td>-</td>
                        <td>FormDefinition</td>
                        <td>Build form definition</td>
                    </tr>
                    <tr>
                        <td><code>buildManager()</code></td>
                        <td>-</td>
                        <td>FormManager</td>
                        <td>Build form manager</td>
                    </tr>
                    <tr>
                        <td><code>login()</code></td>
                        <td>string $name, string $action</td>
                        <td>FormDefinition</td>
                        <td>Build login form</td>
                    </tr>
                    <tr>
                        <td><code>registration()</code></td>
                        <td>string $name, string $action</td>
                        <td>FormDefinition</td>
                        <td>Build registration form</td>
                    </tr>
                    <tr>
                        <td><code>contact()</code></td>
                        <td>string $name, string $action</td>
                        <td>FormDefinition</td>
                        <td>Build contact form</td>
                    </tr>
                </tbody>
            </table>

            <h3>FormManager</h3>
            <p>Manages form lifecycle including validation and submission.</p>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Parameters</th>
                        <th>Returns</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>handleRequest()</code></td>
                        <td>mixed $request</td>
                        <td>self</td>
                        <td>Process form request</td>
                    </tr>
                    <tr>
                        <td><code>isSubmitted()</code></td>
                        <td>-</td>
                        <td>bool</td>
                        <td>Check if form was submitted</td>
                    </tr>
                    <tr>
                        <td><code>isValid()</code></td>
                        <td>-</td>
                        <td>bool</td>
                        <td>Check if form is valid</td>
                    </tr>
                    <tr>
                        <td><code>getValidatedData()</code></td>
                        <td>-</td>
                        <td>array</td>
                        <td>Get validated form data</td>
                    </tr>
                    <tr>
                        <td><code>getErrors()</code></td>
                        <td>-</td>
                        <td>array</td>
                        <td>Get all validation errors</td>
                    </tr>
                    <tr>
                        <td><code>getFieldErrors()</code></td>
                        <td>string $fieldName</td>
                        <td>array</td>
                        <td>Get errors for specific field</td>
                    </tr>
                    <tr>
                        <td><code>bind()</code></td>
                        <td>array $data</td>
                        <td>self</td>
                        <td>Bind data to form</td>
                    </tr>
                    <tr>
                        <td><code>render()</code></td>
                        <td>array $options</td>
                        <td>string</td>
                        <td>Render form as HTML</td>
                    </tr>
                    <tr>
                        <td><code>reset()</code></td>
                        <td>-</td>
                        <td>self</td>
                        <td>Reset form state</td>
                    </tr>
                </tbody>
            </table>

            <h3>FieldInterface</h3>
            <p>Interface for all form fields.</p>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Parameters</th>
                        <th>Returns</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>getName()</code></td>
                        <td>-</td>
                        <td>string</td>
                        <td>Get field name</td>
                    </tr>
                    <tr>
                        <td><code>getType()</code></td>
                        <td>-</td>
                        <td>string</td>
                        <td>Get field type</td>
                    </tr>
                    <tr>
                        <td><code>getValue()</code></td>
                        <td>-</td>
                        <td>mixed</td>
                        <td>Get field value</td>
                    </tr>
                    <tr>
                        <td><code>setValue()</code></td>
                        <td>mixed $value</td>
                        <td>self</td>
                        <td>Set field value</td>
                    </tr>
                    <tr>
                        <td><code>getLabel()</code></td>
                        <td>-</td>
                        <td>string|null</td>
                        <td>Get field label</td>
                    </tr>
                    <tr>
                        <td><code>setLabel()</code></td>
                        <td>string $label</td>
                        <td>self</td>
                        <td>Set field label</td>
                    </tr>
                    <tr>
                        <td><code>setAttribute()</code></td>
                        <td>string $name, mixed $value</td>
                        <td>self</td>
                        <td>Set HTML attribute</td>
                    </tr>
                    <tr>
                        <td><code>getAttribute()</code></td>
                        <td>string $name, mixed $default</td>
                        <td>mixed</td>
                        <td>Get HTML attribute</td>
                    </tr>
                    <tr>
                        <td><code>render()</code></td>
                        <td>array $context</td>
                        <td>string</td>
                        <td>Render field as HTML</td>
                    </tr>
                    <tr>
                        <td><code>validate()</code></td>
                        <td>mixed $value</td>
                        <td>ValidationResult</td>
                        <td>Validate field value</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="text-secondary-custom">ValidationPipeline</h3>
            <p>Orchestrates the complete validation process with field and form-level validation.</p>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Parameters</th>
                            <th>Returns</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="text-primary">validate()</code></td>
                            <td>FormDefinition $form, array $data</td>
                            <td>ValidationResult</td>
                            <td>Validate complete form with all rules</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">validateField()</code></td>
                            <td>FieldInterface $field, mixed $value, array $context</td>
                            <td>ValidationResult</td>
                            <td>Validate single field with context</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">setStopOnFirstError()</code></td>
                            <td>bool $stop</td>
                            <td>self</td>
                            <td>Configure error handling behavior</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">getFieldValidator()</code></td>
                            <td>-</td>
                            <td>FieldValidator</td>
                            <td>Get field validator instance</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">getFormValidator()</code></td>
                            <td>-</td>
                            <td>FormValidator</td>
                            <td>Get form validator instance</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">isValid()</code></td>
                            <td>FormDefinition $form, array $data</td>
                            <td>bool</td>
                            <td>Quick validation helper (static)</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">validateWithErrors()</code></td>
                            <td>FormDefinition $form, array $data</td>
                            <td>array</td>
                            <td>Get validation result with errors (static)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 class="text-secondary-custom">FieldValidator</h3>
            <p>Handles individual field validation with built-in and custom rules.</p>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Parameters</th>
                            <th>Returns</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="text-primary">validate()</code></td>
                            <td>FieldInterface $field, mixed $value, array $context</td>
                            <td>ValidationResult</td>
                            <td>Validate field with all rules</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">registerValidator()</code></td>
                            <td>string $name, callable $callback</td>
                            <td>void</td>
                            <td>Register custom validator (static)</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">setMessage()</code></td>
                            <td>string $ruleName, string $message</td>
                            <td>void</td>
                            <td>Set custom error message (static)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 class="text-secondary-custom">FormValidator</h3>
            <p>Manages form-level cross-field validation rules.</p>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Parameters</th>
                            <th>Returns</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="text-primary">validate()</code></td>
                            <td>FormDefinition $form, array $data</td>
                            <td>ValidationResult</td>
                            <td>Validate form-level rules</td>
                        </tr>
                        <tr>
                            <td><code class="text-primary">registerValidator()</code></td>
                            <td>string $name, callable $callback</td>
                            <td>void</td>
                            <td>Register custom form validator (static)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 class="text-secondary-custom">SecurityManager</h3>
            <p>Manages form security features.</p>
             <table class="table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Parameters</th>
                        <th>Returns</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>generateCsrfToken()</code></td>
                        <td>string|null $formName</td>
                        <td>string</td>
                        <td>Generate CSRF token</td>
                    </tr>
                    <tr>
                        <td><code>validateCsrfToken()</code></td>
                        <td>array $data, string|null $formName</td>
                        <td>bool</td>
                        <td>Validate CSRF token</td>
                    </tr>
                    <tr>
                        <td><code>getCsrfField()</code></td>
                        <td>string|null $formName</td>
                        <td>string</td>
                        <td>Get CSRF field HTML</td>
                    </tr>
                    <tr>
                        <td><code>sanitizeInput()</code></td>
                        <td>array $data, array $fieldTypes</td>
                        <td>array</td>
                        <td>Sanitize form input</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- EXAMPLES -->
        <section id="examples">
            <h2>üìö Complete Examples</h2>
            
            <h3>Example 1: Simple Contact Form</h3>
            <pre><code class="language-php">&lt;?php
use Core\Forms\FormBuilder;
use Core\Forms\FormManager;

// Create the form
$form = FormBuilder::create('contact', [
        'action' => '/contact/send',
        'method' => 'POST'
    ])
    ->text('name', [
        'label' => 'Your Name',
        'required' => true,
        'placeholder' => 'John Doe'
    ])
    ->email('email', [
        'label' => 'Email Address',
        'required' => true,
        'placeholder' => 'you@example.com'
    ])
    ->text('subject', [
        'label' => 'Subject',
        'required' => true
    ])
    ->textarea('message', [
        'label' => 'Your Message',
        'required' => true,
        'rows' => 5,
        'placeholder' => 'Write your message here...'
    ])
    ->csrf()
    ->build();

// Handle submission
$manager = new FormManager($form);
$manager->handleRequest($_POST);

if ($manager->isSubmitted() && $manager->isValid()) {
    $data = $manager->getValidatedData();
    
    // Send email
    sendEmail($data);
    
    // Redirect
    header('Location: /contact/success');
    exit;
}

// Render form
echo $manager->render();
?&gt;</code></pre>

            <h3>Example 2: User Registration with Validation</h3>
            <pre><code class="language-php">&lt;?php
use Core\Forms\FormBuilder;
use Core\Forms\FormManager;

$form = FormBuilder::create('register', [
        'action' => '/auth/register',
        'method' => 'POST'
    ])
    ->text('username', [
        'label' => 'Username',
        'required' => true,
        'minlength' => 3,
        'maxlength' => 20,
        'pattern' => '[a-zA-Z0-9_]+',
        'helpText' => 'Letters, numbers, and underscores only'
    ])
    ->email('email', [
        'label' => 'Email',
        'required' => true
    ])
    ->password('password', [
        'label' => 'Password',
        'required' => true,
        'minlength' => 8,
        'helpText' => 'Minimum 8 characters'
    ])
    ->password('password_confirm', [
        'label' => 'Confirm Password',
        'required' => true
    ])
    ->csrf()
    ->build();

$manager = new FormManager($form);
$manager->handleRequest($_POST);

if ($manager->isSubmitted() && $manager->isValid()) {
    $data = $manager->getValidatedData();
    
    // Additional validation
    if ($data['password'] !== $data['password_confirm']) {
        $errors = ['password_confirm' => ['Passwords do not match']];
    } elseif (usernameExists($data['username'])) {
        $errors = ['username' => ['Username already taken']];
    } else {
        // Register user
        registerUser($data);
        header('Location: /login');
        exit;
    }
}

echo $manager->render();
?&gt;</code></pre>

            <h3>Example 3: Edit Form with Pre-filled Data</h3>
            <pre><code class="language-php">&lt;?php
use Core\Forms\FormBuilder;
use Core\Forms\FormManager;

// Get user data from database
$userId = $_GET['id'];
$user = getUserById($userId);

// Create form
$form = FormBuilder::create('edit_user', [
        'action' => '/user/update',
        'method' => 'POST'
    ])
    ->hidden('id', $user['id'])
    ->text('name', [
        'label' => 'Name',
        'required' => true
    ])
    ->email('email', [
        'label' => 'Email',
        'required' => true
    ])
    ->select('role', [
        'user' => 'User',
        'admin' => 'Administrator',
        'moderator' => 'Moderator'
    ], [
        'label' => 'Role',
        'required' => true
    ])
    ->csrf()
    ->build();

$manager = new FormManager($form);

// Pre-fill with existing data
$manager->bind([
    'id' => $user['id'],
    'name' => $user['name'],
    'email' => $user['email'],
    'role' => $user['role']
]);

// Handle submission
$manager->handleRequest($_POST);

if ($manager->isSubmitted() && $manager->isValid()) {
    $data = $manager->getValidatedData();
    updateUser($data['id'], $data);
    
    header('Location: /user/list');
    exit;
}

echo $manager->render([
    'submit_text' => 'Update User',
    'submit_class' => 'btn btn-success'
]);
?&gt;</code></pre>
        </section>

        <footer class="text-center py-4 text-muted">
            <p>&copy; 2025 Form Component System Documentation</p>
            <p>Version 2.0.0 | Built with PHP 8.1+ | Styled with Bootstrap 5</p>
        </footer>
    </div>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>