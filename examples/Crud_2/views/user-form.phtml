<!-- app/views/admin/user/form.phtml -->
<div class="crud-form">
    <h1><?= $action === 'create' ? 'Create User' : 'Edit User' ?></h1>

    <form method="POST" action="<?= $action === 'create' ? $this->url->get('/admin/users') : $this->url->get("/admin/users/{$item->user_id}") ?>">
        <?php if ($action === 'edit'): ?>
        <input type="hidden" name="_method" value="PUT">
        <?php endif; ?>

        <!-- CSRF Protection -->
        <?= \Core\Utils\Tag::csrfField($this->session->get('_token')) ?>

        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" value="<?= $item->name ?? '' ?>" required>
        </div>

        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="<?= $item->email ?? '' ?>" required>
        </div>

        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" <?= $action === 'create' ? 'required' : '' ?>>
        </div>

        <div class="form-group">
            <label for="password_confirmation">Confirm Password:</label>
            <input type="password" id="password_confirmation" name="password_confirmation" <?= $action === 'create' ? 'required' : '' ?>>
        </div>

        <div class="form-group">
            <label for="kuhnle_id">Kuhnle ID:</label>
            <input type="number" id="kuhnle_id" name="kuhnle_id" value="<?= $item->kuhnle_id ?? '' ?>" required>
        </div>

        <button type="submit" class="btn btn-primary">
            <?= $action === 'create' ? 'Create' : 'Update' ?>
        </button>
        <a href="<?= $this->url->get('/admin/users') ?>" class="btn btn-secondary">Cancel</a>
    </form>
</div>